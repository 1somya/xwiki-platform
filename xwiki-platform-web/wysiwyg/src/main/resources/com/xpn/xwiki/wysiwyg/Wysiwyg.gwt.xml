<module>
  <inherits name='com.google.gwt.user.User' />
  <inherits name="com.google.gwt.i18n.I18N" />
  <inherits name="com.google.gwt.http.HTTP" />
  <inherits name="com.google.gwt.junit.JUnit" />
  <inherits name="com.google.gwt.widgetideas.GlassPanel" />
  <inherits name="com.xpn.xwiki.gwt.api.Api" />

  <stylesheet src="Wysiwyg.css" />
  <entry-point class="com.xpn.xwiki.wysiwyg.client.Wysiwyg" />

  <!-- RangeFactory -->
  <replace-with class="com.xpn.xwiki.wysiwyg.client.selection.internal.DefaultRangeFactory">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.selection.internal.DefaultRangeFactory" />
  </replace-with>

  <replace-with class="com.xpn.xwiki.wysiwyg.client.selection.internal.IERangeFactory">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.selection.internal.DefaultRangeFactory" />
    <when-property-is name="user.agent" value="ie6" />
  </replace-with>

  <!-- SelectionManager -->
  <replace-with class="com.xpn.xwiki.wysiwyg.client.selection.internal.DefaultSelectionManager">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.selection.internal.DefaultSelectionManager" />
  </replace-with>

  <replace-with class="com.xpn.xwiki.wysiwyg.client.selection.internal.IESelectionManager">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.selection.internal.DefaultSelectionManager" />
    <when-property-is name="user.agent" value="ie6" />
  </replace-with>

  <!-- DOMUtils -->
  <replace-with class="com.xpn.xwiki.wysiwyg.client.util.internal.MozillaDOMUtils">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.util.DOMUtils" />
  </replace-with>

  <replace-with class="com.xpn.xwiki.wysiwyg.client.util.internal.IEDOMUtils">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.util.DOMUtils" />
    <when-property-is name="user.agent" value="ie6" />
  </replace-with>

  <!-- Console -->
  <replace-with class="com.xpn.xwiki.wysiwyg.client.util.Console">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.util.Console" />
  </replace-with>

  <replace-with class="com.xpn.xwiki.wysiwyg.client.util.internal.FirebugConsole">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.util.Console" />
    <any>
      <when-property-is name="user.agent" value="gecko1_8" />
      <when-property-is name="user.agent" value="gecko" />
    </any>
  </replace-with>

  <!-- BackColorExecutable -->
  <replace-with class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.BackColorExecutable">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.BackColorExecutable" />
  </replace-with>

  <replace-with class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.HiliteColorExecutable">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.BackColorExecutable" />
    <any>
      <when-property-is name="user.agent" value="gecko1_8" />
      <when-property-is name="user.agent" value="gecko" />
    </any>
  </replace-with>

  <!-- FormatBlockExecutable -->
  <replace-with class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.FormatBlockExecutable">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.FormatBlockExecutable" />
  </replace-with>

  <replace-with class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.IEFormatBlockExecutable">
    <when-type-is class="com.xpn.xwiki.wysiwyg.client.ui.cmd.internal.FormatBlockExecutable" />
    <when-property-is name="user.agent" value="ie6" />
  </replace-with>
</module>
