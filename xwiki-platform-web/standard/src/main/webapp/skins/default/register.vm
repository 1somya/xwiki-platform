#set ($register = $request.getParameter("register"))
#if ($register)
Registration of *$request.getParameter("register_first_name") $request.getParameter("register_last_name")*

#set( $reg= $xwiki.createUser(false))
#if ($reg>0)
The user [$request.getParameter("xwikiname")] has been registered.
#else
An error occured during the registration.
#end
#else
#set($reg=0)
#end

#if ($reg<=0)
Welcome to the registration form. This will allow you to edit pages, once the admin gives you appropriate rights

1.1 Register

<form id="register" name="register" action="" method="post">
#includeTopic("xwiki:XWiki.RegisterJS")
<p>
<input type="hidden" name="template" value="XWiki.XWikiUserTemplate" />
<input type="hidden" name="register" value="1">
#set( $class = $xwiki.getDocument("XWiki.XWikiUsers").xWikiClass)
#set( $serverclass = $xwiki.getDocument("XWiki.XWikiServerClass").xWikiClass)
#set( $obj = $class.newObject() )
#set( $serverobj = $class.newObject() )
</p>
<table class="block" cellspacing="5px">
 <tbody>
 <tr>
#set($prop = $class.first_name)
   <td>First name
   </td>
     <td>$doc.displayEdit($prop, "register_",  $obj)
     </td>
#set($prop = $class.last_name)
   <td>Last name
   </td>
     <td>$doc.displayEdit($prop, "register_",  $obj)
     </td>
 </tr>
<tr>
#set($prop = $class.email)
   <td>e-Mail Address
   </td>
     <td>$doc.displayEdit($prop, "register_",  $obj)
     </td>
 </tr>
<tr>
</tr>
<td></td>
 <tr>
#set($prop = $class.password)
   <td>Password
   </td>
     <td>$doc.displayEdit($prop, "register_",  $obj)
     </td>
   <td>Password (again)
   </td>
     <td>$doc.displayEdit($prop, "register2_",  $obj)
     </td>
 </tr>
<tr><td></td></tr>
 <tr>
   <td>Wiki username</td>
   <td>
    <input name="xwikiname" type="text" size="20" onfocus=" prepareName(document.forms.register);" />
   </td>
 </tr>
 </tbody>
 </table>
<center>
<input type="submit" value="Register me">
</center>
</form>
#end