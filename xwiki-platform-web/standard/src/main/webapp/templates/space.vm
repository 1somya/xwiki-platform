#set($parents = $util.arrayList)
#set($discard = $parents.add($doc.fullName))
#macro(breadcrumb $doc $string $level)
#set($parent = $doc.parent)
#if(($parent != "") && ($level < 6) && (!$parents.contains($parent)))
#set($discard = $parents.add($parent))
#set($pdoc = $xwiki.getDocument($parent).getTranslatedDocument())
#set($pdocurl = $pdoc.getURL("view"))
#set($nstring = "<a href='$pdocurl'>$escapetool.xml(${pdoc.getRenderedTitle('plain/1.0')})</a> &gt; $string")
#set($level = $level + 1)
#breadcrumb($pdoc $nstring $level)
#else
$string
#end
#end
#if($isInServletMode) ## Visible only in a page
<div id="headerspace" class="layoutsection">
<div class="minwidth"></div>
<hr/>
  <div id="breadcrumbs">
    <span class="breadcrumbspace"><a href="$spaceViewUrl">$escapetool.xml(${doc.space})</a>: </span>
#breadcrumb($doc "<a href='${doc.getURL('view')}'>$escapetool.xml($tdoc.getRenderedTitle('plain/1.0'))</a>" 0)
  </div>
<hr/>
</div>
#end