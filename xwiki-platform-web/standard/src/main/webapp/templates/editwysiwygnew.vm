#if($doc.getSyntaxId() == "xwiki/2.0" && $xwiki.wysiwyg.enabled)
#set($formname = "edit")
#set($saveaction = "save")
#set($previewenabled = true)
<link rel="stylesheet" href="${request.contextPath}/com.xpn.xwiki.wysiwyg.Wysiwyg/Wysiwyg.css" />
<script type="text/javascript" src="${request.contextPath}/com.xpn.xwiki.wysiwyg.Wysiwyg/com.xpn.xwiki.wysiwyg.Wysiwyg.nocache.js"></script>
<iframe src="javascript:''" id="__gwt_historyFrame" style="width:0;height:0;border:0"></iframe>
#set($xredirect=$!request.getParameter("xredirect"))
## <form id="edit" method="post" action="$doc.getURL("preview")">
## #set($editactions = "top")
## <div class="topbuttons">#template("editactions.vm")</div>
<div>
<div class="hidden">
<input type="hidden" name="template" value="$!request.template" />
<input type="hidden" name="xcontinue" value="$doc.getURL("edit", "editor=wysiwygnew")"/>
<input type="hidden" name="xredirect" value="$!xredirect" />
<input type="hidden" name="language" value="$!tdoc.realLanguage" />
## <input type="hidden" id="xwikidoctitleinput" name="title" value="$!tdoc.title"/>
## <input type="hidden" id="xwikidocparentinput" name="parent" value="$!tdoc.parent"/>
</div>
<div id="xwikitext">
<div id="xwikieditcontent">
$xwiki.getTextArea($tdoc.content)
</div>
</div>
</div>
#set($editactions = "bottom")
<div class="bottombuttons">#template("editactions.vm")</div>
## </form>
<script type="text/javascript">
//<![CDATA[
    var Wysiwyg0 = {
      hookId: 'content'
    };
//]]>
</script>
#elseif($xwiki.wysiwyg.enabled)
The new GWT-based WYSIWYG editor is disabled. To enable it please set xwiki.wysiwygnew to 1 in xwiki's configuration file.
#else
The new GWT-based WYSIWYG editor is available only for pages having <em>xwiki/2.0</em> syntax.
#end