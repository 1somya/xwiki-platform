###
### Create space or page template
###
#template("startpage.vm")
<div class="main layoutsubsection">
<div id="mainContentArea">
  <h1><span>#if ($request.getParameter('tocreate') && $request.getParameter('tocreate') != 'page') $msg.get('xe.create.space') #else $msg.get('xe.create.page') #end</span></h1>
  #set($parentdoc = $request.getParameter('parent'))
  #if("$!request.getParameter('parent')" == '')
    #set($pweb = 'Main')
  #else
    #set($pweb = $request.getParameter('parent').substring(0, $request.getParameter('parent').indexOf('.')))
  #end
  #set($tocreate = $request.getParameter('tocreate'))
  #if(!$tocreate || ($tocreate == '') || ($tocreate != 'space'))
    #set($tocreate = 'page')
  #end
  <form method="post" action="$doc.getURL('view', 'xpage=create')" onsubmit="cancelCancelEdit()">
    <div class="plainmessage">
      <input type="hidden" name="tocreate" value="$tocreate"/>
      #if($tocreate == 'page')
        <dl>
          <dt>
            <label for="pageTitle">$msg.get('spaceandname')</label>:
          </dt>
          <dd>
            <input type="text" id="pageTitle" name="title" value="${pweb}.Title" onfocus="if(this.value=='${pweb}.Title') this.value='${pweb}.'" onblur="if(this.value=='${pweb}.' || this.value=='') this.value='${pweb}.Title'"/>
          </dd>
          <dt>
            <label for="parent">$msg.get('parent')</label>:
          </dt>
          <dd>
            <input type="text" id="parent" name="parent" value="$!parentdoc"/>
          </dd>
        </dl>
      #else
        <dl>
          <dt>
            <label for="spaceTitle">$msg.get('xe.create.space.name')</label>:
          </dt>
          <dd>
            <input type="text" id="spaceTitle" name="title"/>
          </dd>
        </dl>
      #end
      <input type="submit" class="button" value="$msg.get('create')"/>
    </div>
  </form>
</div>## mainContentArea
</div>## main
#template("endpage.vm")
