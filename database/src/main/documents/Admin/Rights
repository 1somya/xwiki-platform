<?xml version="1.0" encoding="ISO-8859-1"?>

<xwikidoc>
<web>Admin</web>
<name>Rights</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent></parent>
<creator>XWiki.LudovicDubost</creator>
<author>xwiki:XWiki.LudovicDubost</author>
<customClass></customClass>
<contentAuthor>XWiki.superadmin</contentAuthor>
<creationDate>1159728970000</creationDate>
<date>1159732609000</date>
<contentUpdateDate>1162854345000</contentUpdateDate>
<version>1.6</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<content>#set($placemgr = $xwiki.parseGroovyFromPage("XWiki.RightsGroovy"))
$placemgr.setContext($context)
$placemgr.setXWiki($xwiki)
#xwikimessageboxstart("Rights Manager" "")
You can update the global and space rights using this screen. You can choose between Public (any user, including anonymous users), Members Only (any user that you have invited), Admin (any user that you have given admin rights to) for the Place and for each space. By default each space inherits the rights from the Place.
#xwikimessageboxend()

#macro(gright $right)&lt;input type="radio" name="${right}" value="public" #if($grights.contains($right)||(!$mrights.contains($right)&amp;&amp;!$arights.contains($right)))CHECKED #end /&gt;#end
#macro(mright $right)&lt;input type="radio" name="${right}" value="members" #if(!$grights.contains($right)&amp;&amp;$mrights.contains($right))CHECKED #end /&gt;#end
#macro(pright $right)&lt;input type="radio" name="${right}" value="projectmembers" #if($prights.contains($right))CHECKED #end /&gt;#end
#macro(aright $right)&lt;input type="radio" name="${right}" value="admin" #if(!$prights.contains($right)&amp;&amp;!$grights.contains($right)&amp;&amp;!$mrights.contains($right)&amp;&amp;$arights.contains($right))CHECKED #end /&gt;#end

#macro(siright $right $space)&lt;input type="radio" name="${space}_${right}" value="inherited" #if(!$mrights.contains($right)&amp;&amp;!$grights.contains($right)&amp;&amp;!$arights.contains($right))CHECKED #end /&gt;#end
#macro(sgright $right $space)&lt;input type="radio" name="${space}_${right}" value="public" #if($grights.contains($right))CHECKED #end /&gt;#end
#macro(smright $right $space)&lt;input type="radio" name="${space}_${right}" value="members" #if($mrights.contains($right)&amp;&amp;!$grights.contains($right))CHECKED #end /&gt;#end
#macro(spright $right $space)&lt;input type="radio" name="${space}_${right}" value="projectmembers" #if($prights.contains($right))CHECKED #end /&gt;#end
#macro(saright $right $space)&lt;input type="radio" name="${space}_${right}" value="admin" #if(!$prights.contains($right)&amp;&amp;!$grights.contains($right)&amp;&amp;!$mrights.contains($right)&amp;&amp;$arights.contains($right))CHECKED #end /&gt;#end

&lt;form action="RightsConfirmation" action="post"&gt;
&lt;center&gt;
#set($grights = $placemgr.getRights("XWiki.XWikiGuest", true, "", 0))
#set($mrights = $placemgr.getRights("XWiki.XWikiAllGroup", false, "", 0))
#set($prights = $placemgr.getRights("XWiki.ProjectGroup", false, "", 0))
#set($arights = $placemgr.getRights("XWiki.AdminGroup", false, "", 0))

{table}
Global Rights | View &lt;br /&gt;| Edit | Comment
Public | #gright("view") | #gright("edit") | #gright("comment") 

Members Only | #mright("view") | #mright("edit") | #mright("comment") 

Project Members Only | #pright("view") | #pright("edit") | #pright("comment") 

Admin Only | #aright("view") | #aright("edit") | #aright("comment") 
{table}

#set($slist = $xwiki.spaces)
#foreach($space in $slist)
#set($grights = $placemgr.getRights("XWiki.XWikiGuest", true, $space, 1))
#set($mrights = $placemgr.getRights("XWiki.XWikiAllGroup", false, $space, 1))
#set($prights = $placemgr.getRights("XWiki.ProjectGroup", false, $space, 1))
#set($arights = $placemgr.getRights("XWiki.AdminGroup", false, $space, 1))

{table}
Space $space | View &lt;br /&gt;| Edit | Comment
Inherited | #siright("view" $space) | #siright("edit" $space) | #siright("comment" $space) 

Public | #sgright("view" $space) | #sgright("edit" $space) | #sgright("comment" $space) 

Members Only | #smright("view" $space) | #smright("edit" $space) | #smright("comment" $space) 

Project Members Only | #spright("view" $space) | #spright("edit" $space) | #spright("comment" $space) 

Admin Only | #saright("view" $space) | #saright("edit" $space) | #saright("comment" $space) 
{table}

#end

&lt;input type="submit" value="Update rights" /&gt;
&lt;/center&gt;
&lt;/form&gt;
</content></xwikidoc>