<?xml version="1.0" encoding="UTF-8"?>
<xwikidoc>
<web>XWiki</web>
<name>LoggingAdminLogService</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent></parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1343385567000</creationDate>
<date>1343387887000</date>
<contentUpdateDate>1343387887000</contentUpdateDate>
<version>1.2</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>true</minorEdit>
<syntaxId>xwiki/2.1</syntaxId>
<hidden>false</hidden>
<content>{{include reference="XWiki.ExtensionManagerMacros"/}}

{{velocity}}
  (% class="extension-body extension-body-progress extension-body-section" %)(((
  #foreach ($log in $services.logging.logQueue)
    #set ($logLevel = $log.level.toString().toLowerCase())
    #if (!$foreach.hasNext)
      ## Display the last log item as loading if the job is in progress.
      #set ($logLevel = 'loading')
    #end
    * (% class="extension-log-item extension-log-item-$logLevel" %)(((
        #if ($log.throwable)
          #set ($message = "#getThrowableRootCauseMessage($log.throwable)")
          #if ($message.trim() == '')
            #set ($message = $log.formattedMessage)
          #end
          $message

          (((
            #printThrowable($log.throwable)
          )))
        #else
          $log.formattedMessage
        #end
      )))
  #end
  )))
{{/velocity}}</content></xwikidoc>
