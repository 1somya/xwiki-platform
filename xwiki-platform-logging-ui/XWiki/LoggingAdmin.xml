<?xml version="1.0" encoding="UTF-8"?>
<xwikidoc>
<web>XWiki</web>
<name>LoggingAdmin</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent>XWiki.XWiki</parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1342879439000</creationDate>
<date>1343392646000</date>
<contentUpdateDate>1343392646000</contentUpdateDate>
<version>138.1</version>
<title>Logging Administration</title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>false</minorEdit>
<syntaxId>xwiki/2.1</syntaxId>
<hidden>false</hidden>
<object>
<class>
<name>XWiki.ConfigurableClass</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<codeToExecute>
<disabled>0</disabled>
<editor>---</editor>
<name>codeToExecute</name>
<number>7</number>
<picker>0</picker>
<prettyName>codeToExecute</prettyName>
<rows>5</rows>
<size>40</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</codeToExecute>
<configurationClass>
<disabled>0</disabled>
<name>configurationClass</name>
<number>3</number>
<picker>0</picker>
<prettyName>configurationClass</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</configurationClass>
<configureGlobally>
<defaultValue></defaultValue>
<disabled>0</disabled>
<displayFormType>checkbox</displayFormType>
<displayType></displayType>
<name>configureGlobally</name>
<number>4</number>
<prettyName>configureGlobally</prettyName>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
</configureGlobally>
<displayInSection>
<disabled>0</disabled>
<name>displayInSection</name>
<number>1</number>
<picker>0</picker>
<prettyName>displayInSection</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</displayInSection>
<heading>
<disabled>0</disabled>
<name>heading</name>
<number>2</number>
<picker>0</picker>
<prettyName>heading</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</heading>
<iconAttachment>
<disabled>0</disabled>
<name>iconAttachment</name>
<number>8</number>
<picker>0</picker>
<prettyName>iconAttachment</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</iconAttachment>
<linkPrefix>
<disabled>0</disabled>
<name>linkPrefix</name>
<number>5</number>
<picker>0</picker>
<prettyName>linkPrefix</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</linkPrefix>
<propertiesToShow>
<cache>0</cache>
<disabled>0</disabled>
<displayType>input</displayType>
<multiSelect>1</multiSelect>
<name>propertiesToShow</name>
<number>6</number>
<picker>0</picker>
<prettyName>propertiesToShow</prettyName>
<relationalStorage>1</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>20</size>
<sort>none</sort>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<values></values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</propertiesToShow>
</class>
<name>XWiki.LoggingAdmin</name>
<number>0</number>
<className>XWiki.ConfigurableClass</className>
<guid>c0cc3e5d-7495-41c0-80a9-0e168624656b</guid>
<property>
<codeToExecute>{{include document="XWiki.LoggingAdmin"/}}</codeToExecute>
</property>
<property>
<configurationClass></configurationClass>
</property>
<property>
<configureGlobally>1</configureGlobally>
</property>
<property>
<displayInSection>Logging</displayInSection>
</property>
<property>
<heading></heading>
</property>
<property>
<iconAttachment></iconAttachment>
</property>
<property>
<linkPrefix></linkPrefix>
</property>
<property>
<propertiesToShow/>
</property>
</object>
<content>{{velocity}}
#set( $logging = $services.logging )
#set( $logger_list = $logging.getLevels() )

## Setting the logger level if button has been pressed ##
##
#if ($request.loggeraction_set)
  #if( $!logger_list.containsKey("$request.logger_name") )
        #if ($request.logger_level == '')
          {{success}}Logger ${request.logger_name} level has been unset.{{/success}}
          $logging.setLevel($request.logger_name, "null")
        #else
          {{success}}Logger ${request.logger_name} level has been set to ${request.logger_level}.{{/success}}
          $logging.setLevel($request.logger_name, $request.logger_level)
        #end
  #else
        The logger "$request.logger_name" doesn't exist
  #end
#end

#if( $request.loggeraction_reload )
    $logging.reloadDefaultConfiguration()
    {{success}}Configuration has been reloaded from logback file{{/success}} 
#end

= Existing Configuration =

## Livetable #
##
#set($columns = [ "Logger"  , "Level" , "Actions"])
#set($columnsProperties = {
    "Logger" : { "type" : "text" },
    "Level" : { "type" : "text", 'size' : '3' },
    "Actions": { "html" : true, 'sortable' : false }
})
#set($options = {
    'resultPage': 'XWiki.LoggingAdminTableJson'
})
#livetable("logging" $columns $columnsProperties $options)
###

{{/velocity}}

= Reload The Configuration File =

If you made changes on the configuration file logback.xml, here you can reload the logging.
Else, it will bring back the default logging parameters.

{{velocity}}
{{html}}
&lt;form id="loggerform_reload" action="$xwiki.requestURL" enctype="multipart/form-data" method="post"&gt;
&lt;fieldset&gt;
  &lt;span class="buttonwrapper"&gt;&lt;input name="loggeraction_reload" value="Reload Defaut Configuration" class="button" type="submit"&gt;&lt;/span&gt;
&lt;/fieldset&gt;
&lt;/form&gt;
{{/html}}
{{/velocity}}


= Show Logs =

{{include reference="LoggingAdminLog"/}}</content></xwikidoc>
