<?xml version="1.0" encoding="ISO-8859-1"?>

<xwikidoc>
<web>XWiki</web>
<name>CalendarSheet</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent></parent>
<creator>xwiki:XWiki.LudovicDubost</creator>
<author>xwiki:XWiki.LudovicDubost</author>
<customClass></customClass>
<contentAuthor>xwiki:XWiki.LudovicDubost</contentAuthor>
<creationDate>1165963145000</creationDate>
<date>1165963152000</date>
<contentUpdateDate>1165963152000</contentUpdateDate>
<version>1.2</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<object>
<class>
<name>XWiki.TagClass</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<tags>
<name>tags</name>
<prettyName>Tags</prettyName>
<unmodifiable>0</unmodifiable>
<relationalStorage>1</relationalStorage>
<displayType>select</displayType>
<multiSelect>1</multiSelect>
<size>30</size>
<separators> ,|</separators>
<values></values>
<number>1</number>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</tags>
</class>
<name>XWiki.CalendarSheet</name>
<number>0</number>
<className>XWiki.TagClass</className>
<property>
<tags/>
</property>
</object>
<content>1 Event Calendar

#if($request.month)
#if($request.month.startsWith("+")==true)
#set($cmonth = $xwiki.parseInt($request.month.substring(1)))
#else
#set($cmonth = $xwiki.parseInt($request.month))
#end
#else
#set($cmonth = 0)
#end
#set($pmonth = (-1+$cmonth))
#set($nmonth = ($cmonth+1))
#if($pmonth&lt;0)
#set($spmonth = "${pmonth}")
#else
#set($spmonth = "%2b${pmonth}")
#end
#if($nmonth&lt;0)
#set($snmonth = "${nmonth}")
#else
#set($snmonth = "%2b${nmonth}")
#end
#if($cmonth&lt;0)
#set($scmonth = "${cmonth}")
#else
#set($scmonth = "%2b${cmonth}")
#end
#set($pdfurl = $doc.getURL("pdf", "month=${scmonth}"))
[Previous Month&gt;$doc.name?month=${spmonth}] [Next Month&gt;$doc.name?month=${snmonth}] &lt;a href="$pdfurl"&gt;PDF&lt;/a&gt;
#set($cview = $xwiki.calendar)
#set($cparams = $cview.calendarParams)
$cparams.put("month",$request.get("month"))
$cview.getHTMLCalendar($cparams, "")

1.1 Event List

#foreach($event in $doc.getObjects("XWiki.CalendarEvent"))
* $xwiki.getLocalUserName($event.user) $event.startDate $event.endDate $event.description
#end

1.1 New Event

#set($cclass = $xwiki.getDocument("XWiki.CalendarEvent").getxWikiClass())
#set($event = $cclass.newObject())
&lt;form action="$doc.getURL('objectadd')" method="get"&gt;
&lt;p&gt;
&lt;input type="hidden" name="classname" value="XWiki.CalendarEvent" /&gt;
&lt;input type="hidden" name="xredirect" value="${doc.getURL('view')}" /&gt;
&lt;table&gt;
&lt;tr&gt;
#set($pclass = $cclass.get("user"))
&lt;td&gt;Location:&lt;/td&gt;&lt;td&gt;$doc.displayEdit($pclass,"XWiki.CalendarEvent_",$event)&lt;td&gt;
&lt;/tr&gt;
&lt;tr&gt;
#set($pclass = $cclass.get("startDate"))
&lt;td&gt;Start date inclusive (dd/mm/yyyy):&lt;/td&gt;&lt;td&gt;
$doc.displayEdit($pclass,"XWiki.CalendarEvent_",$event)
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;
#set($pclass = $cclass.get("endDate"))
&lt;td&gt;End date inclusive (dd/mm/yyyy):&lt;/td&gt;&lt;td&gt;
$doc.displayEdit($pclass,"XWiki.CalendarEvent_",$event)
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;
#set($pclass = $cclass.get("description"))
&lt;td&gt;Description:&lt;/td&gt;&lt;td&gt;
$doc.displayEdit($pclass,"XWiki.CalendarEvent_",$event)
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;
&lt;input type="submit" value="Add this event" /&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;</content>
</xwikidoc>
