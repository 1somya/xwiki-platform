.#-------------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify behavior when a macro fails to execute
.#-------------------------------------------------------------------------------------
Execution {{testfailingmacro/}} error
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginParagraph
onWord [Execution]
onSpace
beginMacroMarkerInline [testfailingmacro] [] []
beginXMLNode [span] [class=xwikirenderingerror]
onWord [Failed to execute macro: testfailingmacro]
beginXMLNode [errordescription:stack trace here]
endXMLNode [errordescription:stack trace here]
endXMLNode [span] [class=xwikirenderingerror]
endMacroMarkerInline [testfailingmacro] [] []
onSpace
onWord [error]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<p>Execution <!--startmacro:testfailingmacro|-||-|--><span class="xwikirenderingerror">Failed to execute macro: testfailingmacro<!--errordescription:stack trace here--></span><!--stopmacro--> error</p>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
Execution {{testfailingmacro/}} error
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<html><p>Execution <!--startmacro:testfailingmacro|-||-|--><span class="xwikirenderingerror">Failed to execute macro: testfailingmacro<!--errordescription:stack trace here--></span><!--stopmacro--> error</p></html>