.#-------------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify behavior when a macro fails to execute
.#-------------------------------------------------------------------------------------
Execution {{testfailingmacro/}} error
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginParagraph
onWord [Execution]
onSpace
beginMacroMarkerInline [testfailingmacro] [] []
beginXMLNode [span] [class=xwikirenderingerror]
onWord [Failed to execute macro: testfailingmacro]
endXMLNode [span] [class=xwikirenderingerror]
beginXMLNode [span] [class=xwikirenderingerrordescription hidden]
onWord [stack trace here]
endXMLNode [span] [class=xwikirenderingerrordescription hidden]
endMacroMarkerInline [testfailingmacro] [] []
onSpace
onWord [error]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<p>Execution <!--startmacro:testfailingmacro|-||-|--><span class="xwikirenderingerror">Failed to execute macro: testfailingmacro</span><span class="xwikirenderingerrordescription hidden">stack trace here</span><!--stopmacro--> error</p>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
Execution {{testfailingmacro/}} error
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<html><p>Execution <!--startmacro:testfailingmacro|-||-|--><span class="xwikirenderingerror">Failed to execute macro: testfailingmacro</span><span class="xwikirenderingerrordescription hidden">stack trace here</span><!--stopmacro--> error</p></html>