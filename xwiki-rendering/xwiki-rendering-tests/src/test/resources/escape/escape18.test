.#---------------------------------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify that ) is escaped if last character of a embbeded document
.#---------------------------------------------------------------------------------------------------------
(((embedded doc~))))
(((* embedded doc ~))))
(((| cell 1 | cell2 ~))))
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginDocument
beginParagraph
onWord [embedded]
onSpace
onWord [doc]
onSpecialSymbol [)]
endParagraph
endDocument
beginDocument
beginList [BULLETED]
beginListItem
onWord [embedded]
onSpace
onWord [doc]
onSpace
onSpecialSymbol [)]
endListItem
endList [BULLETED]
endDocument
beginDocument
beginTable
beginTableRow
beginTableCell
onSpace
onWord [cell]
onSpace
onWord [1]
onSpace
endTableCell
beginTableCell
onSpace
onWord [cell2]
onSpace
onSpecialSymbol [)]
endTableCell
endTableRow
endTable
endDocument
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<div class="xwiki-document"><p>embedded doc)</p></div><div class="xwiki-document"><ul><li>embedded doc )</li></ul></div><div class="xwiki-document"><table><tr><td>&nbsp;cell 1&nbsp;</td><td>&nbsp;cell2 )</td></tr></table></div>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
(((embedded doc~))))

(((* embedded doc ~))))

(((| cell 1 | cell2 ~))))
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<div class="xwiki-document"><p>embedded doc)</p></div><div class="xwiki-document"><ul><li>embedded doc )</li></ul></div><div class="xwiki-document"><table><tr><td>&nbsp;cell 1&nbsp;</td><td>&nbsp;cell2 )</td></tr></table></div>