.#-----------------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify that macro content support -- (basically that XHTML renderer correctly escape it)
.#-----------------------------------------------------------------------------------------
{{macro}}--{{/macro}}
[[~~-~~->>reference]]
image:--
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
onMacroStandalone [macro] [] [--]
beginParagraph
beginLink [Reference = [reference]] [false]
onSpecialSymbol [-]
onSpecialSymbol [-]
endLink [Reference = [reference]] [false]
onNewLine
onImage: [--] [true]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<p><span class="wikiexternallink"><a href="reference">--</a></span><br/><img src="--" class="wikimodel-freestanding" alt="--"/></p>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
{{macro}}
--
{{/macro}}

[[~~-~~->>reference]]
image:--
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<!--startmacro:macro|-||-|-\-\--><!--stopmacro--><p><!--startwikilink:reference--><span class="wikiexternallink"><a href="reference">--</a></span><!--stopwikilink--><br/><!--startimage:-\-\--><img src="--" class="wikimodel-freestanding" alt="--"/><!--stopimage--></p>