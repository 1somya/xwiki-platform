.#------------------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify that we can have #, @ and ? chars and other special chars such as dots in links to
.# documents and to attachments.
.#------------------------------------------------------------------------------------------
[[pa\.g\?a\@b\#c\\#anchor\\?querystring\\@interwikilink\\]]
[[attach:My\@Page@filename]]
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginParagraph
beginLink [Reference = [pa\.g?a@b#c\\] QueryString = [querystring\] Anchor = [anchor\] InterWikiAlias = [interwikilink\]] [false]
endLink [Reference = [pa\.g?a@b#c\\] QueryString = [querystring\] Anchor = [anchor\] InterWikiAlias = [interwikilink\]] [false]
onNewLine
beginLink [Reference = [attach:My\@Page@filename]] [false]
endLink [Reference = [attach:My\@Page@filename]] [false]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|annotatedxhtml/1.0
.#-----------------------------------------------------
<p><!--startwikilink:pa\\.g\\?a\\@b\\#c\\\\#anchor\\\\?querystring\\\\@interwikilink\\\\--><span class="wikiexternallink"><a><span class="wikigeneratedlinkcontent">pa\.g?a@b#c\\</span></a></span><!--stopwikilink--><br/><!--startwikilink:attach:My\\@Page@filename--><span class="wikiexternallink"><a href="attachmenturl"><span class="wikigeneratedlinkcontent">Page@filename</span></a></span><!--stopwikilink--></p>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
[[pa\.g\?a\@b\#c\\#anchor\\?querystring\\@interwikilink\\]]
[[attach:My\@Page@filename]]
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<html><p><!--startwikilink:pa\\.g\\?a\\@b\\#c\\\\#anchor\\\\?querystring\\\\@interwikilink\\\\--><span class="wikiexternallink"><a><span class="wikigeneratedlinkcontent">pa\.g?a@b#c\\</span></a></span><!--stopwikilink--><br/><!--startwikilink:attach:My\\@Page@filename--><span class="wikiexternallink"><a href="attachmenturl"><span class="wikigeneratedlinkcontent">Page@filename</span></a></span><!--stopwikilink--></p></html>