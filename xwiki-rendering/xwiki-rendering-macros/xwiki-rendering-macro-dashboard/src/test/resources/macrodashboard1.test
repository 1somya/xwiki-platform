.runTransformations
.#-----------------------------------------------------
.# Test that dashboard macro with columns layout produces the same result as a container macro with columns layout and justify parameter.
.# Also test that dashboard without layout parameter does columns layouting. 
.# Put macro instances in the dashboard macro in these tests so that they would work fine even when implementing the dashboard content restrictions 
.#-----------------------------------------------------
.input|xwiki/2.0
.#-----------------------------------------------------
{{dashboard layout="columns"}}
((({{gadget/}})))
((({{gadget/}})))
{{/dashboard}}

{{dashboard}}
((({{gadget/}})))
((({{gadget/}})))
{{/dashboard}}
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginMacroMarkerStandalone [dashboard] [layout=columns] [((({{gadget/}})))
((({{gadget/}})))]
beginGroup [[class]=[dashboard]]
beginGroup [[class]=[container-justified container-columns]]
beginGroup [[class]=[column first-column]]
beginGroup [[class]=[gadget]]
beginHeader [2, null] [[class]=[gadget-title]]
onWord [Gadget]
endHeader [2, null] [[class]=[gadget-title]]
beginGroup [[class]=[gadget-content]]
beginMacroMarkerStandalone [gadget] []
onWord [gadget]
endMacroMarkerStandalone [gadget] []
endGroup [[class]=[gadget-content]]
endGroup [[class]=[gadget]]
endGroup [[class]=[column first-column]]
beginGroup [[class]=[column last-column]]
beginGroup [[class]=[gadget]]
beginHeader [2, null] [[class]=[gadget-title]]
onWord [Gadget]
endHeader [2, null] [[class]=[gadget-title]]
beginGroup [[class]=[gadget-content]]
beginMacroMarkerStandalone [gadget] []
onWord [gadget]
endMacroMarkerStandalone [gadget] []
endGroup [[class]=[gadget-content]]
endGroup [[class]=[gadget]]
endGroup [[class]=[column last-column]]
beginGroup [[class]=[clearfloats]]
endGroup [[class]=[clearfloats]]
endGroup [[class]=[container-justified container-columns]]
endGroup [[class]=[dashboard]]
endMacroMarkerStandalone [dashboard] [layout=columns] [((({{gadget/}})))
((({{gadget/}})))]
beginMacroMarkerStandalone [dashboard] [] [((({{gadget/}})))
((({{gadget/}})))]
beginGroup [[class]=[dashboard]]
beginGroup [[class]=[container-justified container-columns]]
beginGroup [[class]=[column first-column]]
beginGroup [[class]=[gadget]]
beginHeader [2, null] [[class]=[gadget-title]]
onWord [Gadget]
endHeader [2, null] [[class]=[gadget-title]]
beginGroup [[class]=[gadget-content]]
beginMacroMarkerStandalone [gadget] []
onWord [gadget]
endMacroMarkerStandalone [gadget] []
endGroup [[class]=[gadget-content]]
endGroup [[class]=[gadget]]
endGroup [[class]=[column first-column]]
beginGroup [[class]=[column last-column]]
beginGroup [[class]=[gadget]]
beginHeader [2, null] [[class]=[gadget-title]]
onWord [Gadget]
endHeader [2, null] [[class]=[gadget-title]]
beginGroup [[class]=[gadget-content]]
beginMacroMarkerStandalone [gadget] []
onWord [gadget]
endMacroMarkerStandalone [gadget] []
endGroup [[class]=[gadget-content]]
endGroup [[class]=[gadget]]
endGroup [[class]=[column last-column]]
beginGroup [[class]=[clearfloats]]
endGroup [[class]=[clearfloats]]
endGroup [[class]=[container-justified container-columns]]
endGroup [[class]=[dashboard]]
endMacroMarkerStandalone [dashboard] [] [((({{gadget/}})))
((({{gadget/}})))]
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<div class="dashboard"><div class="container-justified container-columns"><div class="column first-column"><div class="gadget"><h2 class="gadget-title wikigeneratedheader"><span>Gadget</span></h2><div class="gadget-content">gadget</div></div></div><div class="column last-column"><div class="gadget"><h2 class="gadget-title wikigeneratedheader"><span>Gadget</span></h2><div class="gadget-content">gadget</div></div></div><div class="clearfloats"></div></div></div><div class="dashboard"><div class="container-justified container-columns"><div class="column first-column"><div class="gadget"><h2 class="gadget-title wikigeneratedheader"><span>Gadget</span></h2><div class="gadget-content">gadget</div></div></div><div class="column last-column"><div class="gadget"><h2 class="gadget-title wikigeneratedheader"><span>Gadget</span></h2><div class="gadget-content">gadget</div></div></div><div class="clearfloats"></div></div></div>