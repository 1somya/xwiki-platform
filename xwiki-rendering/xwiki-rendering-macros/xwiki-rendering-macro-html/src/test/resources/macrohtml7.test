.#----------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify that the HTML Macro knows how to handle CDATA and that they are not lost.
.# Also verify that characters are not escaped when inside the CDATA section.
.#----------------------------------------------------------------------------------
{{html wiki="false"}}
<script type="text/javascript">
   //<![CDATA[
         if (2 > 1)
             alert("Hello, World")
   // ]]>
</script>
{{/html}}
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginMacroMarkerStandalone [html] [wiki=false] [
<script type="text/javascript">
   //<![CDATA[
         if (2 > 1)
             alert("Hello, World")
   // ]]>
</script>
]
beginXMLNode [script] [type=text/javascript]
onWord [//]
beginXMLNode [CDATA]
onWord [
         if (2 > 1)
             alert("Hello, World")
   // ]
endXMLNode [CDATA]
endXMLNode [script] [type=text/javascript]
endMacroMarkerStandalone [html] [wiki=false] [
<script type="text/javascript">
   //<![CDATA[
         if (2 > 1)
             alert("Hello, World")
   // ]]>
</script>
]
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<!--startmacro:html|-|wiki="false"|-|
<script type="text/javascript">
   //<![CDATA[
         if (2 > 1)
             alert("Hello, World")
   // ]]>
</script>
--><script type="text/javascript">//<![CDATA[
         if (2 > 1)
             alert("Hello, World")
   // ]]></script><!--stopmacro-->