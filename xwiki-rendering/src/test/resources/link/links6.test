.#-----------------------------------------------------
.input|xwiki/2.0
.#-----------------------------------------------------
[[{{macro}}]]
[[Label>Reference]]
[[Reference|Param=Value]]
[[[[no link]]>>Reference]]
[[[[image:whatever>>Reference]]
not:link
.#-----------------------------------------------------
.expect|event
.#-----------------------------------------------------
beginDocument
beginParagraph
beginLink [Reference = [{{macro}}]] [false]
endLink [Reference = [{{macro}}]] [false]
onNewLine
beginLink [Reference = [Label>Reference]] [false]
endLink [Reference = [Label>Reference]] [false]
onNewLine
beginLink [Reference = [Reference|Param=Value]] [false]
endLink [Reference = [Reference|Param=Value]] [false]
onNewLine
beginLink [Reference = [[[no link]] [false]
endLink [Reference = [[[no link]] [false]
onSpecialSymbol [>]
onSpecialSymbol [>]
onWord [Reference]
onSpecialSymbol []]
onSpecialSymbol []]
onNewLine
beginLink [Reference = [Reference]] [false]
onSpecialSymbol [[]
onSpecialSymbol [[]
onImage: [whatever] [true]
endLink [Reference = [Reference]] [false]
onNewLine
onWord [not]
onSpecialSymbol [:]
onWord [link]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml
.#-----------------------------------------------------
<p><!--startwikilink:{{macro}}--><span class="wikicreatelink"><a href="/xwiki/bin/view/{{macro}}"><span class="wikigeneratedlinkcontent">{{macro}}</span></a></span><!--stopwikilink--><br/><!--startwikilink:Label>Reference--><span class="wikicreatelink"><a href="/xwiki/bin/view/Label&gt;Reference"><span class="wikigeneratedlinkcontent">Label&gt;Reference</span></a></span><!--stopwikilink--><br/><!--startwikilink:Reference|Param=Value--><span class="wikicreatelink"><a href="/xwiki/bin/view/Reference|Param=Value"><span class="wikigeneratedlinkcontent">Reference|Param=Value</span></a></span><!--stopwikilink--><br/><!--startwikilink:[[no link--><span class="wikicreatelink"><a href="/xwiki/bin/view/[[no link"><span class="wikigeneratedlinkcontent">[[no link</span></a></span><!--stopwikilink-->&gt;&gt;Reference]]<br/><!--startwikilink:Reference--><span class="wikicreatelink"><a href="/xwiki/bin/view/Reference">[[<!--startimage:whatever--><img src="/xwiki/bin/download/currentdoc/whatever" class="wikimodel-freestanding" alt="whatever"/><!--stopimage--></a></span><!--stopwikilink--><br/>not:link</p>
.#-----------------------------------------------------
.expect|xwiki
.#-----------------------------------------------------
[[{{macro}}]]
[[Label>Reference]]
[[Reference|Param=Value]]
[[[[no link]]>>Reference]]
[[[[image:whatever>>Reference]]
not:link
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<html><p><!--startwikilink:{{macro}}--><span class="wikicreatelink"><a href="/xwiki/bin/view/{{macro}}"><span class="wikigeneratedlinkcontent">{{macro}}</span></a></span><!--stopwikilink--><br/><!--startwikilink:Label>Reference--><span class="wikicreatelink"><a href="/xwiki/bin/view/Label&gt;Reference"><span class="wikigeneratedlinkcontent">Label&gt;Reference</span></a></span><!--stopwikilink--><br/><!--startwikilink:Reference|Param=Value--><span class="wikicreatelink"><a href="/xwiki/bin/view/Reference|Param=Value"><span class="wikigeneratedlinkcontent">Reference|Param=Value</span></a></span><!--stopwikilink--><br/><!--startwikilink:[[no link--><span class="wikicreatelink"><a href="/xwiki/bin/view/[[no link"><span class="wikigeneratedlinkcontent">[[no link</span></a></span><!--stopwikilink-->&gt;&gt;Reference]]<br/><!--startwikilink:Reference--><span class="wikicreatelink"><a href="/xwiki/bin/view/Reference">[[<!--startimage:whatever--><img src="/xwiki/bin/download/currentdoc/whatever" class="wikimodel-freestanding" alt="whatever"/><!--stopimage--></a></span><!--stopwikilink--><br/>not:link</p></html>